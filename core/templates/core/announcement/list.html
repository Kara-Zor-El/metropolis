{% extends 'core/base.html' %}
{% load link_tags %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'core/css/base.css' %}">
<link rel="stylesheet" href="{% static 'core/css/list.css' %}">
{% endblock %}

{% block main %}
<div class="container">
    <div class="headers">
        <ul>
            <li class="header" id="all">ALL</li>
            {% if user.is_authenticated %}
            <li class="header" id="my-feed">MY FEED</li>
            {% endif %}
            <li class="header" id="top">TOP</li>
        </ul>
        <script>
            $(document).ready(function(){
                $("#all").css({
                    "font-weight": "bold",
                    "color": "var(--highlight-blue)",
                    "border-color": "var(--highlight-blue)"
                });
                $(".header").click(function(){
                    $(".header").each(function() {
                        $(this).css({
                            "font-weight": "normal",
                            "color": "var(--link-blue)",
                            "border-color": "var(--link-blue)"
                        });
                    });
                    $(".cards").hide();
                    $("#cards-"+this.id).show();
                    $(this).css({
                        "font-weight": "bold",
                        "color": "var(--highlight-blue)",
                        "border-color": "var(--highlight-blue)"
                    });
                });
            });
        </script>
    </div>
    <ul class="list-group list-group-flush">
        {% for announcement in feed_all %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
                <div class="fw-bold">{{ announcement.title }}</div>
                {{ announcement.body }}
                <br>
                {% for tag in announcement.tags.all %}
                    <span class="badge rounded-pill bg-primary text-white">{{ tag.name }}</span>
                {% endfor %}
            </div>
        </li>
        {% endfor %}
    </ul>
</div>

{% if user.is_authenticated %}
<div class="card mb-3">
    <div class="card-header">
        My Feed
    </div>
    <ul class="list-group list-group-flush">
        {% for announcement in feed_my %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
                <div class="fw-bold">{{ announcement.title }}</div>
                {{ announcement.body }}
                <br>
                {% for tag in announcement.tags.all %}
                    <span class="badge rounded-pill bg-primary text-white">{{ tag.name }}</span>
                {% endfor %}
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% for feed_custom in feeds_custom %}
<div class="card mb-3">
    <div class="card-header">
        {{ feed_custom.0.name }}
    </div>
    <ul class="list-group list-group-flush">
        {% for announcement in feed_custom.1 %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
                <div class="fw-bold">{{ announcement.title }}</div>
                {{ announcement.body }}
                <br>
                {% for tag in announcement.tags.all %}
                    <span class="badge rounded-pill bg-primary text-white">{{ tag.name }}</span>
                {% endfor %}
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endfor %}
{% endblock %}
