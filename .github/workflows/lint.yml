name: lint
on: [push]
jobs:
  linter_name:
    name: runner
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Python
        uses: actions/setup-python@v2.2.2
      - name: Format
        run: make fmt-setup fmt
      - name: Diff
        id: diff
        run: |
        git add *
        echo "::set-output name=changes::$(git diff --cached | wc -l)"
      - name: Suggest Changes
        if: ${{ steps.diff.changes != 0 }}
        uses: reviewdog/action-suggester@v1
        with:
          tool_name: blackfmt
